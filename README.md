
<!-- README.md is generated from README.Rmd. Please edit that file -->

# DTtiming

<!-- badges: start -->
<!-- badges: end -->

The goal of DTtiming is to estimate the timing of the demographic
transition using the model by Delventhal, Fernandez-Villaverde, and
Guner (2023)

## Installation

You can install the development version of DTtiming like so:

``` r
# FILL THIS IN! HOW CAN PEOPLE INSTALL YOUR DEV PACKAGE?
```

## Example

Setup and example data:

``` r
library(DTtiming)
library(ggplot2)
## basic example code

## Create example data:
T_max = 100
x_t = rep(1, T_max)
tau_2 = 33
tau_3 = 67
y = matrix(make_z1_scalar(1:T_max, tau_2, tau_3)*10 + rnorm(T_max, sd = 0.2),
          ncol = 1)

# Plot the data:
ggplot(data.frame(x = 1:T_max,
                  y = y),
  aes(x = x, y = y)) +
  geom_point()
```

<img src="man/figures/README-example-1.png" width="100%" />

Now we can fit the model:

``` r

DT_fit = grid_Search_best_DT_fit(y)

plot_DT_fit(DT_fit)
```

<img src="man/figures/README-unnamed-chunk-2-1.png" width="100%" />

All relevant parameters are returned:

``` r
DT_fit
#> $alpha
#>      alpha_1      alpha_3 
#>  9.987139349 -0.004478673 
#> 
#> $sigma_sq
#> sigma_sq_1 sigma_sq_3 
#> 0.03478493 0.02372242 
#> 
#> $tau
#> tau_2 tau_3 
#>    33    67 
#> 
#> $y
#>   [1]  9.890167819 10.020203687  9.759041933 10.184980403 10.039595950
#>   [6] 10.096792669 10.147495896  9.898873318 10.043389016 10.011763348
#>  [11]  9.966050699 10.213709636 10.128684842 10.275726922  9.640255337
#>  [16]  9.720294418  9.327009406  9.930898442 10.156115581 10.070578250
#>  [21] 10.015427710  9.949626466  9.712690189  9.895488752 10.149218676
#>  [26] 10.231467910 10.361053427 10.044765335  9.964233155 10.125179303
#>  [31]  9.898198425  9.844739951  9.840190949  9.728676934  9.583397621
#>  [36]  9.059907473  8.495441461  8.845033362  8.164286380  7.916955362
#>  [41]  7.575871913  7.005766973  6.819672736  6.613282032  6.537927149
#>  [46]  6.081440068  5.905171193  5.776291182  5.303095091  5.093959962
#>  [51]  5.038260379  4.570676159  4.220510832  3.882622736  3.359684266
#>  [56]  3.503205643  2.866167490  2.671116562  2.560773310  1.789546569
#>  [61]  1.769174757  1.271590335  1.111976547  0.648370285  0.765391982
#>  [66]  0.295301403 -0.182389037  0.184185631  0.025580466 -0.340099596
#>  [71]  0.284500425 -0.165963771  0.005081034 -0.085596164 -0.042550736
#>  [76]  0.162345892  0.241675481 -0.219051022 -0.040603517 -0.161481895
#>  [81] -0.219935028  0.192610117  0.230306495 -0.355179036  0.147085460
#>  [86] -0.042487424 -0.140062243  0.119271357 -0.152930038  0.116276047
#>  [91]  0.076812450  0.085554178  0.075879233  0.023715075 -0.089159599
#>  [96] -0.051959602  0.112950941  0.134099638 -0.051685488 -0.124024882
#> 
#> $y_hat
#>   [1]  9.987139349  9.987139349  9.987139349  9.987139349  9.987139349
#>   [6]  9.987139349  9.987139349  9.987139349  9.987139349  9.987139349
#>  [11]  9.987139349  9.987139349  9.987139349  9.987139349  9.987139349
#>  [16]  9.987139349  9.987139349  9.987139349  9.987139349  9.987139349
#>  [21]  9.987139349  9.987139349  9.987139349  9.987139349  9.987139349
#>  [26]  9.987139349  9.987139349  9.987139349  9.987139349  9.987139349
#>  [31]  9.987139349  9.987139349  9.987139349  9.693268231  9.399397113
#>  [36]  9.105525994  8.811654876  8.517783758  8.223912639  7.930041521
#>  [41]  7.636170403  7.342299285  7.048428166  6.754557048  6.460685930
#>  [46]  6.166814811  5.872943693  5.579072575  5.285201456  4.991330338
#>  [51]  4.697459220  4.403588102  4.109716983  3.815845865  3.521974747
#>  [56]  3.228103628  2.934232510  2.640361392  2.346490274  2.052619155
#>  [61]  1.758748037  1.464876919  1.171005800  0.877134682  0.583263564
#>  [66]  0.289392446 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#>  [71] -0.004478673 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#>  [76] -0.004478673 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#>  [81] -0.004478673 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#>  [86] -0.004478673 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#>  [91] -0.004478673 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#>  [96] -0.004478673 -0.004478673 -0.004478673 -0.004478673 -0.004478673
#> 
#> $RSS
#> [1] 3.268356
```

## References

<div id="refs" class="references csl-bib-body hanging-indent">

<div id="ref-delventhalDemographicTransitionsTime2023"
class="csl-entry">

Delventhal, Matthew J, Jesus Fernandez-Villaverde, and Nezih Guner.
2023. “Demographic Transitions Across Time and Space.” Working {{Paper}}
2022-031. Chicago: HCEO Human Capital and Economic Opportunity Global
Working Group.

</div>

</div>
